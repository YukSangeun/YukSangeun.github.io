---
title: "데이터베이스 : 트랜잭션과 무결성 제약조건"
excerpt: "트랜잭션? 무결성 제약조건?"

toc: true
toc_sticky: true
toc_label: "LIST"

categories:
  - Subject
tags:
  - Programming
last_modified_at: 2020-09-29  
---

## Transaction (트랜잭션)

데이터베이스의 상태를 변환시키는 **하나의 논리적 기능을 수행하기 위한 작업의 단위** 또는 **한꺼번에 모두 수행되어야 할 일련의 연산들**을 의미



1. 특징

* 데이터베이스 시스템에서 병행 제어 및 회복 작업 시 처리되는 작업의 논리적 단위
* 사용자가 시스템에 대한 서비스 요구 시 시스템이 응답하기 위한 상태변환 과정의 작업 단위
* 하나의 트랜잭션은 원자성을 가진다 (commit되거나 Rollback)

2. 성질

* Atomicity(원자성): 트랜잭션 내의 모든 명령은 반드시 완벽히 수행되어야 하며, 어느 부분하나라도 오류가 발생하면 한 트랜잭션 내의 모든 명령이 전부 취소되어야 한다.
* Consistency(일관성): 시스템이 가지고 있는 고정요소는 트랜잭션 수행전과 완료 후의 상태가 같아야 한다. 즉, 실행이 성공적으로 완료하면 언제나 일관성 있는 데이터베이스 상태로 변환된다.
* Isolation(독립성, 격리성): 둘 이상의 트랜잭션이 동시에 병행 실행되는 경우 서로에게 영향을 끼치면 안되므로 분리되어야 한다. 하나의 트랜잭션이 실행 중일 경우 다른 트랜잭션의 연산이 끼어들 수 없다. 수행 중인 트랜잭션은 완전히 완료될 때까지 다른 트랜잭션에서 수행 결과를 참조할 수 없다.
* Durability(영속성, 지속성): 성공적으로 완료된 트랜잭션의 결과는 시스템이 고장나도 영구적으로 반영되어야 한다.

3. Commit 연산: 트랜잭션에 의한 갱신연산이 완료된 것을 관리자에게 알려주는 연산
4. Rollack 연산: 트랜잭션이 비정상적으로 종료되어 DB의 일관성을 깨뜨렸을 때, 트랜잭션의 원자성을 위해 모든 연산을 취소(Undo)하는 연산. 트랜잭션이 재시작 or 폐기



## Integrity Constraints(무결성 제약조건)

**무결성**: 데이터베이스에 저장된 데이터 값과 그것이 표현하는 현실 세계의 실제 값이 일치하는 정확성을 의미

**무결성 제약조건**: 데이터베이스에 들어있는 **데이터의 정확성과 일관성을 보장**하기 위해 부정확한 자료가 데이터베이스 내에 저장되는 것을 방지하기 위한 **제약조건**

무결성의 종류: 개체 무결성, 참조 무결성, 도메인 무결성

1. **도메인 무결성**: 속성이 정의되어 있는 영역을 벗어나지 않도록 규정

* Check 제약: 값의 범위를 정해 놓는 제약으로 조건에 맞는 데이터만을 입력 받을 수 있다.
* Default 제약: 입력 값을 지정하지 않았을 때 열의 값이 기본값으로 입력되도록 지정하는 값
* Not null제약: 데이터를 입력 받을 때 NULL을 허용하지 않는다.

2. **참조 무결성**: 참조 관계에 있는 두 테이블의 데이터가 항상 일관된 값을 가지는 규정

* Foreign Key: 다른 테이블의 데이터를 참조할 때 없는 값을 참조할 수 없도록 제약을 주는 것으로 참조될 테이블이 먼저 만들어지고 값이 입력되어야 한다.
* Cascading actions: 삭제와 갱신이 있으며, 이 기능을 사용하면 참조되는 relation에 값이 삭제 또는 갱신될 경우 그 값을 참조하는 relation에서 해당 값을 또한 삭제 또는 갱신되도록 한다.

3. **개체 무결성**: 하나의 테이블에 중복된 행이 존재하지 않도록 규정 (기본키 제약)

* Unique 제약: null값이 허용되며 **NULL을 포함해서 값의 중복이 허용되지 않는** 제약 (이 제약이 붙은 속성들의 조합은 후보 키 집합을 형성한다.)
* Primary key 제약: **null값이 허용되지 않으며** 값의 중복이 허용되지 않는 제약 (Unique 키와 not null 제약이 합쳐진 것)

