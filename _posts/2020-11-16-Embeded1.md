---
title: "임베디드 시스템 : 도입"
excerpt: ""

toc: true
toc_sticky: true
toc_label: "LIST"

categories:
  - Subject
tags:
  - Programming
last_modified_at: 2020-11-15
---
## 실시간 시스템  

임베디드 시스템의 중요한 특징 중 한가지이다.

**실시간 시스템?**  
* **정해진 시간 내에** 시스템이 **결과를 출력하는 시스템**  
* 주어진 작업을 빨리 처리하는 것이 아니고 정해진 시간을 넘어서는 안된다는 뜻임  
* 결과 산출에 걸리는 시간에도 **적시성(timeliness)**을 가지며 외부 자극에도 예측 가능한(predictable) 방식으로 반응.  
* 이러한 특징으로, 시스템 결함이 발생해도 멈추지 않고 계속 실행되어야 하는 임베디드 시스템에 필수적인 요소로 자리 잡고 있다.  

**적시성?**  
디바이스 기기가 열악한 환경에서도 데드라인(deadline: 반응에 요구되는 시간의 한계 값)이내에 논리적으로도 정확한 출력 값을 산출해 내는 것

 시간 제약을 만족하기 위해서 고속의 프로세싱을 요구하지만, 고속의 프로세싱이 RTOS의 요구 조건을 만족시킨 것이 아니다. 고속의 프로세싱은 시스템의 평균 응답 시간을 최소화하지만, RTOS에서 요구되는 **예측 가능성**을 보장하지는 않는다.

ex) DVD player: 영상 한 frame을 1/30초에 하나씩 decoding해서 화면에 뿌려주어야 한다. (deadline: 33 milisecond , 단순하게 빨리한다고 좋은게 아니다)  

**예측 가능성?**

프로세싱 속도가 빠르고 느리고의 문제가 아니라, **허용할 수 있는 시간 내에 결과를 출력할 수 있느냐 없느냐**의 문제이다.

유도 미사일에서 처리 속도가 1GHz인데 자신의 위치를 보정하기 위해서는 1ms마다 보정값을 계산해야 한다고 가정할 때, 계산이 복잡해서 임베디드 시스템이 가끔씩 2ms마다 보정값을 계산한다면 예측 불가능 시스템으로 실시간 시스템으로는 부적절하다.

1MHz의 처리속도를 가진 공조시스템이 1초마다 실내 상태를 검사하여 온도와 습도를 조절할 때, 항상 주어진 시간 안에 처리가 된다면 예측 가능한 시스템이다.



**특징**

* 실행 시간 예측이 가능하며 실시간성을 띄고있다.
* 시스템의 응답 속도, 인터럽트 등에서도 성능이 우수하다.
* 모듈화, 선점형 멀티 태스킹, 스케줄링, 통합 개발 환경 등을 지원한다.
* 한 가지 목적에 최적화가 되어있다.
* ROM에 프로세스와 커널을 담아 주소 공간을 공유한다.



**실시간 시스템의 분류**  

1. 경성 실시간 시스템 (hard real-time system)  
	* 제어작업이 데드라인을 어기는 경우 시스템에 **심각한 영향을 주는** 속성을 지닌 시스템  
	* ex) 원자력 발전소, 항공기, 우주 왕복선 등의 제어시스템  
2. 연성 실시간 시스템 (soft real-time system)  
	* 데드라인을 만족시키는데 있어서 어느 정도 **융통성을 갖는** 시스템으로, 무효화 처리 또는 복구 등을 통해 재가동을 할 수 있다.  
	* 즉, 정해진 범위를 넘는 시간 지연이 발생하더라도 시스템 전체의 error가 되지 않는다.  
	* ex) DVD 재생기컴퓨터, 정보기기, 네트워크 관련기기 등  



**경성 실시간 시스템의 일반적 단점**  

* 불완전한 기능의 운영체제  
	* 실시간성 보장을 위해 task의 생성/실행/종료의 자유도를 제한한다. (운영체제가 제약)  
* 많은 RTOS에서 thread모델로서 프로그램 실행  
	* 메모리 보호를 받지 못하는 프로그램 수행  
	* 한 개의 응용 프로그램(task)의 버그가 전체 시스템을 다운으로 유도  
	* ROMable 운영체제  
* 특정회사 혹은 기능에 따라 개발 (아예 운영체제까지 같이 개발한다. task의 생성/실행/종료를 제약해야 하므로)  
	* 소스 프로그램의 비공개  
	* 초기구입 비용 및 사용료가 고가로 비경제적  



**실시간 시스템 vs 임베디드 시스템**  
임베디드 시스템은 대부분 실시간적 요소를 내포한다.  



## 임베디드 시스템  

기계나 기타 제어가 필요한 시스템에 대해 제어를 위해 **특정 기능을 수행하는 컴퓨터 시스템**으로 **장치 내에 존재하는 전자 시스템**이다. 기계 또는 장치 내에 존재하기 때문에 내장형 시스템이라고도 한다.  


즉, 특정한 기능을 수행하기 위해 하드웨어와 소프트웨어가 내장된 전자 제어 시스템으로, 단순 회로만으로 구성된 장치가 아닌 마이크로 프로세서가 내장되어 있으며 이를 통해 원하는 작업을 수행 및 관리하는 프로그램이 포함된 시스템이다.  


* 전체 장치의 일부분으로 구성되며, 제어가 필요한 시스템을 위한 두뇌 역할을 하는 특정 목적의 컴퓨터 시스템으로 개인 컴퓨터와 같은 특정되지 않는 일반적인 목적을 수행하는 컴퓨터 시스템과 대조된다.  
* 특정 목적을 수행하는 컴퓨터 시스템이므로 목적을 설정하고 이를 수행하는 프로그램 코드를 작성하여 메모리에 기록하고 이를 읽어 동작 시키는 방법이 일반적이다.  



**특징** : 속도, 크기, 전력, 신뢰성, 정확성, 적응성  
임베디드 시스템이 고속으로 작업을 수행한다면 실시간 애플리케이션에 사용할 수 있다.  시스템의 크기와 전력소비는 매우 낮아야하며, 시스템을 다양한 상황에 쉽게 적용할 수 있다.  

1. 특정한 기능에 부합하는 최적화를 통해 설계 (일반적인 범용 컴퓨터와 다르다는 의미)
2. 항상 독립형 장치는 아니며 대형 장치내에 컴퓨터화된 부품일 수 있다.  
3. 제한된 메모리와 저전력 - PDA나 카드 리더기와 같은 작은 단말기들은 정보를 수집하여 읽는 기능만 존재한다. 이는 한번 충전하면 오래 사용할 수 있어야하고, 그리 많은 기능이 있지 않아 적은 메모리만으로도 수행하여야 하기 대문에 적은 메모리와 배터리 등이 특징이 될 수 있다.  



**응용 사례**  

1. 일상 생활에서의 사례: 가정에 있는 대부분의 전자제품은 일상에서 편리한 경험과 편안함을 제공하는 기능들이 내장되어 있다. 예를 들어, 홈 보안 시스템, 디지털 카메라, 텔레비전, 전자레인지, 에어컨, 냉장고 등  
2. 자동차: 수십 가지의 임베디드 시스템들이 내장되어 자동차를 제어하는 데 사용되며, 실시간 운영체제를 통해 사용자가 한눈에 알아볼 수 있다. 임베디드 서브 시스템으로 ABS(Anti-lock Braking System), 에어컨 제어, 점화 제어, 에어백 제어, 우적 감지 와이퍼 등  
3. 의학: 혈압 모니터, 심장 박동 모니터, 맥방 조정기, 원격 감독 및 수술, 스캐너 등  
4. 자동화 산업: 자동화는 작업을 반복적으로 수행하는 프로세스로 기계 생산성을 향상시키고 개발 비용과 설계시간을 줄인다. 예로 산업 기계 및 제어, 온도 모니터링, 3D 프린팅 기계 등  
5. 항공 우주 및 방위: 보안과 성능이 가장 중요한 견고한 분야. 예로 비행 제어 시스템, 작동, 공기 및 열 관리, 엔진 출력, 차량 터보 차저, 내비게이션 시스템 등  



**범용 시스템 vs 임베디드 시스템**  

|              | 임베디드 시스템 | 범용 시스템           |
| ------------ | --------------- | --------------------- |
| CPU          | 저전력, 저사양  | 고성능                |
| 메모리       | 저용량          | 대용량                |
| 보조기억장치 | Flash memeory   | HDD, SDD, ...         |
| 주변 장치    | 제한됨          | 다양함                |
| OS           | linux, RTOS     | windows, linux, macOS |
| 개발환경     | 교차개발        | PC환경                |





## 임베디드 시스템의 OS 탑재(RTOS)  

**초기의 임베디드 시스템 (=실시간 시스템)**

* 간단한 firmware가 주류
* 간단하고 단순한 순차적인 작업에 관련, 순차적인 프로그램으로 충분하기 대문에 OS가 필요없었다.  
* 8bit, 16bit 마이크로프로세서(마이크로콘트롤러) 사용



**OS탑재의 필요성**  

1. 시스템 고기능화

   * 시스템의 규모가 커짐에 따른 **multi tasking** 기능 요구 (network나 multimedia가 시스템의 기본으로 자리 잡음)
     * 프로세스 (혹은 thread)를 이용하여 시간적 복잡성을 해결
     * ex. Engine contorl
     * taksks: spark contorl, crankshaft sensing, fuel/air mixture / oxygen sensor / Kalman filter / State machine 
     * 위 task들은 동시 실행이 잘되어야 자동차가 잘 작동된다. 즉, multithread가 요구됨 , 자동차는 임베디드시스템
   * 다양한 디바이스 수용과 관리 (networking, GUI, Audio, Video)
   * 기능성이 부가되고 기능이 많아지고 복잡해짐
   * 순차적인 프로그램 작성이 불가능하여 운영체제가 도입됨

2. 빠른 개발과 유지보수 비용

   * 새로운 요구 상황에 맞게 프로그램을 수정, 다운로드 용이

   * 새롭게 생겨나는 고품질의 참조형 서비스를 적시에 제공

그러나, 임베디드 시스템의 특성상 **실시간성을 지원**해야 하므로 일반 운영체제로는 한계가 있어, **실시간 운영체제라는 특별한 OS가 개발됨**



임베디드 시스템이 사용하는 운영체제는 크게 **실시간 운영체제(RTOS)**와 **비실시간운영체제(embedded OS)**로 나눠진다.

* 비실시간 운영체제: 컴퓨터의 하드웨어와 소프트웨어를 제어하며 응용프로그램이 컴퓨터를 쉽게 사용할 수 있도록 만들어 주는 프로그램이다. 하드웨어와 응요프로그램 간의 인터페이스 역할을 하면서 CPU, 메모리, 입출력장치와 같은 컴퓨터 자원을 관리한다.
* ex. WinCE, 임베디드 리눅스 안드로이드
* 실시간 운영체제: 지정된 시간 내에 결과를 보장하는 작고 빠른 운영체제이다. 임의의 정보가 입력되었을 때 주어진 시간 안에 작업이 완료되어 결과를 출력한다.
* ex. VxWorks, Nucleus, mc/osii



**RTOS (Real Time OS)**

* VxWorks: 윈드리버 시스템사가 개발한 실시간 운영체제로 윈드리버는 현재 IBM소속이다. VRTX와 pSOSystem을 위한 개발환경과 네트워크 환경을 제공하기 위하여 개발되었다.
  * pSOS: 1980년대 인테그레이티드 시스템즈에서 개발된 임베디드 디바이스용 실시간 커널
  * pSOSystem: pSOS를 이용한 OS이며, 커널을 중심으로 여러개의 소프트웨어 컴포넌트로 구성된다. **멀티태스킹 RTOS**로 256개의 태스크를 가지며 우선순위를 가지는 **선점형 스케쥴링 방식**이다.
  * BSP(Board Support Package): 디바이스 드라이버와 칩 및 각종 디바이스의 정보를 가지며, 하드웨어가 변결될 경우 시스템 프로그램에 큰 변경 없이 BSP만 수정하여 쉽게 처리가 가능하다.
* OSE: 이탈리아의 Enea에서 개발한 실시간 운영체제로 하드웨어 사용률을 극대화하는 고성능 POSIX 호환 멀티코어 실시간 운영체제이다. 통신에서 자동차, 산업 자동차 및 다양한 임베디드 시스템에 전원을 공급
  * POSIX (Portable Operating System interface, 이식가능 운영 체제 인터페이스): 서로 다른 UNIX OS의 공통 API를 정리하여 이식성이 높은 유닉스 응용 프로그램을 개발하기 위한 목적으로 IEEE가 책정한 애플리케이션 인터페이스 규격
* Embedded Linux: 저 성능의 프로세서와 소용량의 메모리를 가진 임베디드 시스템용으로 개발된 linux. Unix 계열 실시간 운영체제로 하드웨어 사용률을 극대화하는 고성능 POSIX호환 멀티코어 실시간 운영체제이다. 
  * 장점:
    1. 기능성과 확장성이 우수 (리눅스 이용에 따른 장점, 모듈 단위 설계)
    2. PowerPC, ARM, MIPS 등 다양한 CPU platform지원
    3. open source: 로열티가 없으므로 경제성이 높다.
    4. 사용자 층이 넓어 오류 수정이 빠르고 안정성이 높다. (지속적 업그레이드, 엔지니어 확보 유리)
    5. 기존의 데스크 탑 개발 환경과 동일하여 개발이 용이함 (cross compiler, debeger, GUI 등)
    6. 많은 장치의 드라이벌르 제공
  * 단점:
    1. 기존 RTOS보다 많은 메모리를 요구함
    2. **범용 OS로 설계되어 Real-Time을 지원하지 못함.**
    3. GUI환경을 개발하기 어려움
    4. 제품화하기 위한 솔루션 구성이 어려움
    5. 많은 업체들과 개발자들이 독자적으로 개발하고 있어 표준화가 어려움
* Windows CE: 마이크로소프트에서 개발한 운영체제로 PDA, PMP 등에 많이 사용됐다.
* VRTX, uC/OSII



## 안드로이드 vs ios

ios: ipad, iphone등에 사용하기 위해 Apple사에서 개발한 임데디드 운영체제, 애플 고유의 SDK와 아이폰 simulator를 제공한다.

Android: open handset Alliance의 모바일 시스템용 운영체제의 표준을 위해 google에 의해 개발됨. 안드로이드 SDK 및 emulator를 제공 (자바 가상 머신을 포함한다. java 기반 응용 프로그램 개발 / 사용 가능)



**시스템의 개방성**

애플: 제한적이며 폐쇄적이다. 모든 콘텐츠는 애플이 지원하는 특정 기기에서만 이용할 수 있다. 때문에 개발자는 애플이 구현해 놓은 기능을 이용해 콘텐츠를 생산해야 한다. 하지만, 그만큼 제어와 안정성이 뛰어나다는 것을 반증한다.

안드로이드: 오픈소스 생태계를 기반으로 운영되기에 앱을 만들기까지의 제약사항이 ios보다 적은편이다. 사용자 역시 외부 앱 설치도 가능하고 취향에 맞는 인터페이스를 꾸밀 수 있다는 장점이 있다.



