---
title: "데이터베이스 : 정규화"
excerpt: "정규화? 역정규화?"

toc: true
toc_sticky: true
toc_label: "LIST"

categories:
  - Subject
tags:
  - Programming
last_modified_at: 2020-09-29  
---

## Normalization (정규화)

관계형 데이터베이스의 설계에서 최소화하게 데이털르 구조화하는 프로세스를 말한다.

**목표**

```이상이 있는 관계를 재구성하여 작고 잘 조직된 관계를 생성하는 것```

**목적 (주로 상위 두가지를 목적으로 함)**

1. **불필요한 데이터(data redundancy)를 제거**
2. **각종 이상현상(Anomaly)을 방지하기 위해, 테이블의 구성을 논리적이고 직관적으로 한다.**
3. 데이터베이스 구조 확장 시 재디자인을 최소화
4. 다양한 관점에서의 query를 지원하기 위해
5. 무결성 제약조건의 시행을 간단하게 하기 위해



**이상현상의 종류**

1. 갱신 이상: 반복된 데이터 중 일부를 갱신할 시 데이터의 불일치 발생 가능
2. 삽입 이상: 불필요한 정보를 함께 저장하지 않고는 어떤 정보를 저장하는 것이 불가능
3. 삭제 이상: 필요한 정보를 함께 삭제하지 않고는 어떤 정보를 삭제하는 것이 불가능



**정규화 법칙** (1NF, 2NF, 3NF, BCNF, 4NF, 5NF)

```실무적으로 4차, 5차 정규화까지 가는 경우가 드물다```

* 1차 정규형 (1NF, First Normal Form): 릴레이션 **모든 속성에 대한 domain의 값이 atomic**하도록 만들어진 정규형 (atomic 하지 않은 domain이 사용될 경우 질의어 복잡, 저장장치 복잡, 데이터의 중복된 저장공간 사용 유도)
* 2차 정규형(2NF, Second Normal Form): 1NF를 만족하면서 릴레이션에 존재하는 **부분 함수적 종속을 제거**하여, **모든 속성이 기본키에 완전 함수 종족**이 되도록 만들어진 정규형
  * 부분적 함수 의존: 기본 키를 이루는 속성들 중 한 속성에만 종속된 다른 컬럼이 존재함을 의미(부분적 함수 종속이 발생하면 데이터의 중복 발생)
* 3차 정규형(3NF, Third Normal Form): 2차 정규형을 만족하면서 릴레이션을 구성하는 속성들 간의 이행적 종속관계를 분해하여 **속성들간 이행적 함수 종속이 없도록** 만들어진 정규형
  * 이행적 함수 종족: 기본키 이외에 다른 컬럼이 그외 다른 컬럼을 결정할 수 있는 것
  * 해결 방안: 2NF와 마찬가지로 중복이 발생하게 된다. 따라서 테이블 나누기
* BCNF: 3차 정규형을 만족하면서 **모든 결정자가 super key인 경우**(a → b, a는 R의 슈퍼키) 해당 relation은 BCNF를 만족한다.
  * 해결방안: BCNF를 위반한 dependency a → b에 대해 두 테이블로 나누다. (a∪b와 R-(b-a))
* 4차 정규형 (4NF, Fourth Normal Form): BCNF를 만족하면서 릴레이션에서 **다치 종속 관계를 제거**한 정규형이다.
  * 다치 종속(multival dependency): 두 속성이 일대다 대응이 되는 경우이다. 예를 들어, '학번'과 '수강과목' 속성이 있을 때, 한 학생이 여러 과목을 수강할 수 있는 경우 하나의 '학번'은 여러 개의 '수강과목'에 대응하므로 다치 종속 관계이다.
* 5차 정규형 (5NF, Fifth Normal Form): 후보키를 통하지 않은 조인종속(Join Dependency)을 제거한 정규형



**3NF와 BCNF의 비교**

* 3NF는 무손실 조인 분해와 종속 보존 분해가 가능하지만 BCNF는 무손실 조인분해는 가능하나 종속 보존 분해가 불가능한 경우가 존재한다.
* 예를 들어, R(A, B, C, D) dependency: CD, ADB가 있을 때 C는 슈퍼키가 아니므로 BCNF를 만족하지 않는다. 따라서 분리시켜야 하며 R(A,B,C), T(C,D)로 분리된다. 이때, 나눠진 테이블은 ADB를 만족하기 위해서는 두 테이블을 합쳐야 한다. 즉 나눠진 테이블에 대해서 dependency가 만족하지 않아 join할 상황이 생기게 된다.



## Denormalization(역정규화)

1. 정규화를 통해 분리되었던 릴레이션에서 중복을 허용하고 다시 통합하거나 분할아여 구조를 재조정하는 과정
2. 데이터베이스의 물리적 설계과정에서 성능 향상을 위해 시행
3. 장점: 원하는 값을 찾을 때 시간 절약. join을 안하므로
4. 단점: 업데이트 시 불필요한 추가 공간과 시간 필요, 추가적인 코딩 작업과 추가 코드에 대한 에러의 가능성 존재 (코딩 작업 관련 단점은 view를 사용하면 사라짐)